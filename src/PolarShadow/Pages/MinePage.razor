@page "/mine"
@layout MainLayout
@inject INavigationService _nav

<Layout>
    @if (_nav.CanBack())
    {
        <Header>
            <Icon Type="left" Theme="outline" OnClick="()=>_nav.Back()" Class="cursor-point-style menu-icon" />
        </Header>
    }
    <Content Class="scroll-content">
        <Space Direction="DirectionVHType.Vertical" Style="width:100%">
            <SpaceItem>
                <Title Level="4">下载</Title>
                <Divider />
                <GridRow Justify="start">
                    <GridCol Flex="@("100px")">
                        <Text>RPC</Text>
                    </GridCol>
                    <GridCol Flex="@("auto")">
                        <Input @bind-Value="_rpc" BindOnInput="true"></Input>
                    </GridCol>
                </GridRow>
                <GridRow Justify="start">
                    <GridCol Flex="@("100px")">
                        <Text>下载地址</Text>
                    </GridCol>
                    <GridCol Flex="@("auto")">
                        <Input @bind-Value="_downloadPath" BindOnInput="true"></Input>
                    </GridCol>
                </GridRow>
            </SpaceItem>
            <SpaceItem>
                <Button OnClick="Save">保存</Button>
            </SpaceItem>
        </Space>
    </Content>
</Layout>


@code {
    private string _rpc;
    private string _downloadPath;

    protected override void OnInitialized()
    {
        _rpc = PreferenceSettings.Rpc;
        _downloadPath = PreferenceSettings.DownloadPath;
    }

    private void Save()
    {
        PreferenceSettings.Rpc = _rpc;
        PreferenceSettings.DownloadPath = _downloadPath;
    }
}
