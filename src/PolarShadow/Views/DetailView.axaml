<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="PolarShadow.Views.DetailView"
			 xmlns:vm="using:PolarShadow.ViewModels"
			 xmlns:ctrl="using:PolarShadow.Controls"
			 xmlns:polar="using:PolarShadow.Videos"
			 x:DataType="vm:DetailViewModel"
			 x:CompileBindings="True">
	<Grid Margin="10"
		  RowDefinitions="*,60">
		<ScrollViewer IsVisible="{Binding !IsLoading}">
			<StackPanel Orientation="Vertical"
						Spacing="10">
				<Image MaxWidth="120"
					   HorizontalAlignment="Center"
					   ctrl:ImageAttached.Source="{Binding Detail.ImageSrc}"/>
				<SelectableTextBlock Text="{Binding Detail.Name}" 
									 HorizontalAlignment="Center"/>
				<TextBlock Text="简介"
						   Classes="title"/>
				<SelectableTextBlock Text="{Binding Detail.Description}" TextWrapping="Wrap"/>
				<TextBlock Text="来源"
						   Classes="title"/>
				<SelectableTextBlock Text="{Binding Detail.Site}"/>
				<TextBlock Text="剧集"
						   Classes="title"/>
				<ItemsControl ItemsSource="{Binding Detail.Seasons}">
					<ItemsControl.ItemTemplate>
						<DataTemplate DataType="polar:VideoSeason">
							<StackPanel Orientation="Vertical"
										Spacing="10">
								<TextBlock Text="{Binding Name}"/>
								<ListBox ItemsSource="{Binding Episodes}">
									<ListBox.ItemsPanel>
										<ItemsPanelTemplate>
											<WrapPanel/>
										</ItemsPanelTemplate>
									</ListBox.ItemsPanel>
									<ListBox.ItemTemplate>
										<DataTemplate DataType="polar:VideoEpisode">
											<TextBlock Text="{Binding Name}"/>
										</DataTemplate>
									</ListBox.ItemTemplate>
								</ListBox>
							</StackPanel>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</StackPanel>
		</ScrollViewer>
		<PathIcon Data="{StaticResource loader2}"
				  Classes.spin="{Binding IsLoading}"
				  IsVisible="{Binding IsLoading}"
				  Height="30"
				  Width="30"/>
		
		<Button Classes="icon"
				Content="&#xF064;"
				HorizontalAlignment="Right"
				VerticalAlignment="Bottom"
				Margin="20"
				Command="{Binding RefreshCommand}"/>

		<Border Grid.Row="1"
				BorderBrush="LightGray"
				BorderThickness="0,1,0,0">
			<Button Classes="icon"
					Classes.save="{Binding !IsSave}"
					Classes.delete="{Binding IsSave}"
					HorizontalAlignment="Center"
					VerticalAlignment="Center">
				<Button.Styles>
					<Style Selector="Button.save">
						<Setter Property="Content" Value="&#xF0B1;"/>
					</Style>
					<Style Selector="Button.delete">
						<Setter Property="Content" Value="&#xEC2A;"/>
					</Style>
				</Button.Styles>
			</Button>
		</Border>
	</Grid>
</UserControl>
